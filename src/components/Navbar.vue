<template>
    <div class="navbar">
        <f7-link v-if="backUrl" @click="back" class="navbar__back">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.7071 4.2929C11.0976 4.68342 11.0976 5.31659 10.7071 5.70711L5.41423 10.9999H21C21.5523 10.9999 22 11.4476 22 11.9999C22 12.5522 21.5523 12.9999 21 12.9999H5.41421L10.7071 18.2928C11.0976 18.6833 11.0976 19.3165 10.7071 19.707C10.3166 20.0976 9.68342 20.0976 9.29289 19.707L2.29289 12.707C2.10536 12.5195 2 12.2651 2 11.9999C2 11.7347 2.10536 11.4804 2.2929 11.2928L9.2929 4.29289C9.68342 3.90237 10.3166 3.90237 10.7071 4.2929Z" fill="#111111"/>
            </svg>
        </f7-link>
        <div class="navbar__wrapper">
            <div class="navbar__title">
                {{ title }}
            </div>
            <div v-if="share" class="navbar__share" @click="shareBill">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5304 1.46967C12.2375 1.17678 11.7626 1.17678 11.4697 1.46967L7.46971 5.46967C7.17682 5.76256 7.17682 6.23744 7.46971 6.53033C7.76261 6.82322 8.23748 6.82322 8.53037 6.53033L11.25 3.81066L11.25 15C11.25 15.4142 11.5858 15.75 12 15.75C12.4143 15.75 12.75 15.4142 12.75 15L12.75 3.81066L15.4697 6.53033C15.7626 6.82322 16.2375 6.82322 16.5304 6.53033C16.8233 6.23744 16.8233 5.76256 16.5304 5.46967L12.5304 1.46967ZM7.50004 9.25L7.35703 9.24998C6.09892 9.2497 5.29702 9.24952 4.62119 9.45453C3.10308 9.91505 1.91509 11.103 1.45457 12.6211C1.24956 13.297 1.24974 14.0989 1.25002 15.357L1.25004 15.5L1.25004 16L1.25004 16.0274C1.25004 16.9361 1.25003 17.6562 1.28984 18.2397C1.33051 18.8357 1.41521 19.3436 1.61161 19.8177C2.09371 20.9816 3.01841 21.9063 4.18229 22.3884C4.65645 22.5848 5.16435 22.6695 5.76037 22.7102C6.3438 22.75 7.06397 22.75 7.97266 22.75H7.97272H8.00004L16 22.75H16.0275H16.0275C16.9362 22.75 17.6563 22.75 18.2397 22.7102C18.8357 22.6695 19.3436 22.5848 19.8178 22.3884C20.9817 21.9063 21.9064 20.9816 22.3885 19.8177C22.5849 19.3436 22.6696 18.8357 22.7102 18.2397C22.75 17.6563 22.75 16.9361 22.75 16.0274V16.0274V16V15.5L22.7501 15.357C22.7503 14.0989 22.7505 13.297 22.5455 12.6211C22.085 11.103 20.897 9.91505 19.3789 9.45453C18.7031 9.24952 17.9012 9.2497 16.643 9.24998L16.5 9.25H16C15.5858 9.25 15.25 9.58579 15.25 10C15.25 10.4142 15.5858 10.75 16 10.75H16.5C17.9502 10.75 18.509 10.7581 18.9435 10.8899C19.9822 11.205 20.795 12.0179 21.1101 13.0566C21.2419 13.4911 21.25 14.0499 21.25 15.5V16C21.25 16.9421 21.2496 17.6112 21.2137 18.1376C21.1783 18.6572 21.1107 18.9828 21.0027 19.2437C20.6728 20.0401 20.0401 20.6728 19.2438 21.0026C18.9828 21.1107 18.6573 21.1782 18.1376 21.2137C17.6112 21.2496 16.9422 21.25 16 21.25L8.00004 21.25C7.0579 21.25 6.38885 21.2496 5.86247 21.2137C5.34283 21.1782 5.01724 21.1107 4.75632 21.0026C3.95998 20.6728 3.32729 20.0401 2.99743 19.2437C2.88935 18.9828 2.82182 18.6572 2.78636 18.1376C2.75045 17.6112 2.75004 16.9421 2.75004 16L2.75004 15.5C2.75004 14.0499 2.75818 13.4911 2.88999 13.0566C3.20507 12.0179 4.01791 11.205 5.05662 10.8899C5.49111 10.7581 6.04991 10.75 7.50004 10.75H8.00004C8.41425 10.75 8.75004 10.4142 8.75004 10C8.75004 9.58579 8.41425 9.25 8.00004 9.25H7.50004Z" fill="#333333"/>
                </svg>
            </div>
        </div>
    </div>
</template>

<script>
    import { f7 } from 'framework7-vue';
    import Cookies from "js-cookie";

    export default {
        props: {
            title: {
                type: String,
                required: true,
            },
            backUrl: {
                type: String,
            },
            share: {
                type: Boolean,
            },
        },
        components: {

        },
        setup(props) {
            const back = () => {
                f7.views.current.router.back('/', {
                    force: !!props.backUrl
                })
            }

            const shareBill = () => {
                try {
                    navigator.share({
                        url: document.location.origin + '/?table=' + Cookies.get('table') + '&zone=' + Cookies.get('zone') + '&partner=' + Cookies.get('partner'),
                        title: "",
                        text: ""
                    });
                } catch (e) {
                    f7.popup.open('.share-popup');
                }

            }

            return {
                back,
                shareBill
            }
        }
    }
</script>

<style lang="scss">

</style>
