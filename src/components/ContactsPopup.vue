<template>
    <f7-popup
        swipe-to-close="to-bottom"
        swipe-handler=".swipe-handler"
        class="popup-bottom contacts-popup"
    >
        <div class="swipe-handler">
            <div class="swipe-handler__icon"></div>
        </div>
        <f7-link popup-close class="waiter-popup__close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M4.46967 4.46967C4.76256 4.17678 5.23744 4.17678 5.53033 4.46967L10 8.93934L14.4697 4.46967C14.7626 4.17678 15.2374 4.17678 15.5303 4.46967C15.8232 4.76256 15.8232 5.23744 15.5303 5.53033L11.0607 10L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L10 11.0607L5.53033 15.5303C5.23744 15.8232 4.76256 15.8232 4.46967 15.5303C4.17678 15.2374 4.17678 14.7626 4.46967 14.4697L8.93934 10L4.46967 5.53033C4.17678 5.23744 4.17678 4.76256 4.46967 4.46967Z"
                      fill="#898989"/>
            </svg>
        </f7-link>
        <div class="wifi-popup__wrapper">
            <div class="wifi-popup__title">
                {{ $t('contacts') }}
            </div>
            <div class="wifi-popup__form">
                <div v-if="partner?.name" class="wifi-popup__form_group">
                    <div class="wifi-popup__form_label">
                        {{ $t('name') }}
                    </div>
                    <div class="wifi-popup__form_field">
                        <input type="text" readonly :value="partner?.name">
                    </div>
                </div>
                <div v-if="partner?.address" class="wifi-popup__form_group">
                    <div class="wifi-popup__form_label">
                        {{ $t('address') }}
                    </div>
                    <div class="wifi-popup__form_field" :class="{ copied: copiedStates.address }">
                        <input type="text" readonly :value="copiedStates.address ? $t('copied') : partner?.address">
                        <svg v-if="copiedStates.address" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20.5068 5.44714C20.8121 5.72703 20.8328 6.20146 20.5529 6.5068L9.55287 18.5068C9.41464 18.6576 9.22081 18.7454 9.01629 18.7498C8.81178 18.7543 8.61432 18.675 8.46967 18.5303L3.46967 13.5303C3.17678 13.2374 3.17678 12.7626 3.46967 12.4697C3.76256 12.1768 4.23744 12.1768 4.53033 12.4697L8.97644 16.9158L19.4471 5.49321C19.727 5.18787 20.2015 5.16724 20.5068 5.44714Z" fill="#00C600"/>
                        </svg>
                        <svg v-else width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" @click="copyText(partner?.address, 'address')">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.36712 1.25L8.40012 1.25H9.60012L9.63312 1.25C10.7253 1.24999 11.5908 1.24999 12.2884 1.30699C13.0018 1.36527 13.6054 1.48688 14.1566 1.76772C15.0503 2.22312 15.777 2.94978 16.2324 3.84355C16.5132 4.39472 16.6348 4.99834 16.6931 5.71173C16.7292 6.15263 16.7424 6.66058 16.7473 7.25042C17.3256 7.25182 17.8092 7.25782 18.2197 7.28351C18.7665 7.31774 19.2337 7.38899 19.6733 7.55445C20.9535 8.03628 21.9638 9.04662 22.4457 10.3268C22.6111 10.7664 22.6824 11.2336 22.7166 11.7805C22.7501 12.316 22.7501 12.9758 22.7501 13.8083V13.8333V15.6V15.633C22.7501 16.7252 22.7501 17.5906 22.6931 18.2883C22.6348 19.0017 22.5132 19.6053 22.2324 20.1565C21.777 21.0502 21.0503 21.7769 20.1566 22.2323C19.6054 22.5131 19.0018 22.6347 18.2884 22.693C17.5908 22.75 16.7253 22.75 15.6331 22.75H15.6001H13.8335H13.8084C12.9759 22.75 12.3161 22.75 11.7806 22.7165C11.2337 22.6823 10.7665 22.611 10.3269 22.4456C9.04674 21.9637 8.0364 20.9534 7.55457 19.6732C7.38911 19.2336 7.31786 18.7664 7.28363 18.2195C7.25794 17.809 7.25194 17.3255 7.25055 16.7472C6.66071 16.7423 6.15275 16.729 5.71186 16.693C4.99847 16.6347 4.39484 16.5131 3.84367 16.2323C2.9499 15.7769 2.22324 15.0502 1.76784 14.1565C1.487 13.6053 1.3654 13.0017 1.30711 12.2883C1.25011 11.5906 1.25012 10.7251 1.25012 9.633L1.25012 9.6V8.4L1.25012 8.367C1.25012 7.27486 1.25011 6.40936 1.30711 5.71173C1.3654 4.99835 1.487 4.39472 1.76784 3.84355C2.22324 2.94978 2.9499 2.22312 3.84367 1.76772C4.39484 1.48688 4.99847 1.36527 5.71186 1.30699C6.40948 1.24999 7.27498 1.24999 8.36712 1.25ZM8.7506 16.75C8.75203 17.3183 8.75777 17.7594 8.7807 18.1258C8.81057 18.603 8.86751 18.9032 8.95843 19.1448C9.2881 20.0207 9.97939 20.712 10.8553 21.0417C11.0969 21.1326 11.3971 21.1896 11.8743 21.2194C12.3574 21.2497 12.9703 21.25 13.8335 21.25H15.6001C16.7326 21.25 17.5369 21.2494 18.1662 21.198C18.7869 21.1473 19.1711 21.0509 19.4756 20.8958C20.0871 20.5842 20.5843 20.087 20.8959 19.4755C21.051 19.171 21.1474 18.7867 21.1981 18.1661C21.2495 17.5367 21.2501 16.7325 21.2501 15.6V13.8333C21.2501 12.9702 21.2498 12.3573 21.2195 11.8742C21.1897 11.397 21.1327 11.0968 21.0418 10.8552C20.7121 9.97926 20.0209 9.28798 19.1449 8.95831C18.9034 8.86738 18.6031 8.81045 18.126 8.78058C17.7595 8.75765 17.3184 8.75191 16.7501 8.75048V9.6V9.63302C16.7501 10.7252 16.7501 11.5906 16.6931 12.2883C16.6348 13.0017 16.5132 13.6053 16.2324 14.1565C15.777 15.0502 15.0503 15.7769 14.1566 16.2323C13.6054 16.5131 13.0018 16.6347 12.2884 16.693C11.5908 16.75 10.7253 16.75 9.63314 16.75H9.60012H8.7506ZM5.834 2.80201C5.21338 2.85271 4.82913 2.94909 4.52465 3.10423C3.91313 3.41582 3.41594 3.913 3.10435 4.52453C2.94921 4.829 2.85284 5.21325 2.80213 5.83388C2.75071 6.46327 2.75012 7.26752 2.75012 8.4V9.6C2.75012 10.7325 2.75071 11.5367 2.80213 12.1661C2.85284 12.7867 2.94921 13.171 3.10435 13.4755C3.41594 14.087 3.91313 14.5842 4.52465 14.8958C4.82913 15.0509 5.21338 15.1473 5.834 15.198C6.46339 15.2494 7.26764 15.25 8.40012 15.25H9.60012C10.7326 15.25 11.5369 15.2494 12.1662 15.198C12.7869 15.1473 13.1711 15.0509 13.4756 14.8958C14.0871 14.5842 14.5843 14.087 14.8959 13.4755C15.051 13.171 15.1474 12.7867 15.1981 12.1661C15.2495 11.5367 15.2501 10.7325 15.2501 9.6V8.4C15.2501 7.26752 15.2495 6.46326 15.1981 5.83388C15.1474 5.21325 15.051 4.829 14.8959 4.52453C14.5843 3.913 14.0871 3.41582 13.4756 3.10423C13.1711 2.94909 12.7869 2.85271 12.1662 2.80201C11.5369 2.75058 10.7326 2.75 9.60012 2.75H8.40012C7.26764 2.75 6.46339 2.75058 5.834 2.80201Z" fill="#C8C8C8"/>
                        </svg>
                    </div>
                </div>
                <div v-if="partner?.contacts?.phone" class="wifi-popup__form_group">
                    <div class="wifi-popup__form_label">
                        {{ $t('phone') }}
                    </div>
                    <div class="wifi-popup__form_field" :class="{ copied: copiedStates.phone }">
                        <a class="external" :href="'tel:' + partner?.contacts?.phone?.replace(/[\s()-]/g, '')">
                            {{ copiedStates.phone ? $t('copied') : partner?.contacts?.phone }}
                        </a>
                        <svg v-if="copiedStates.phone" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20.5068 5.44714C20.8121 5.72703 20.8328 6.20146 20.5529 6.5068L9.55287 18.5068C9.41464 18.6576 9.22081 18.7454 9.01629 18.7498C8.81178 18.7543 8.61432 18.675 8.46967 18.5303L3.46967 13.5303C3.17678 13.2374 3.17678 12.7626 3.46967 12.4697C3.76256 12.1768 4.23744 12.1768 4.53033 12.4697L8.97644 16.9158L19.4471 5.49321C19.727 5.18787 20.2015 5.16724 20.5068 5.44714Z" fill="#00C600"/>
                        </svg>
                        <svg v-else width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" @click="copyText(partner?.contacts?.phone, 'phone')">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.36712 1.25L8.40012 1.25H9.60012L9.63312 1.25C10.7253 1.24999 11.5908 1.24999 12.2884 1.30699C13.0018 1.36527 13.6054 1.48688 14.1566 1.76772C15.0503 2.22312 15.777 2.94978 16.2324 3.84355C16.5132 4.39472 16.6348 4.99834 16.6931 5.71173C16.7292 6.15263 16.7424 6.66058 16.7473 7.25042C17.3256 7.25182 17.8092 7.25782 18.2197 7.28351C18.7665 7.31774 19.2337 7.38899 19.6733 7.55445C20.9535 8.03628 21.9638 9.04662 22.4457 10.3268C22.6111 10.7664 22.6824 11.2336 22.7166 11.7805C22.7501 12.316 22.7501 12.9758 22.7501 13.8083V13.8333V15.6V15.633C22.7501 16.7252 22.7501 17.5906 22.6931 18.2883C22.6348 19.0017 22.5132 19.6053 22.2324 20.1565C21.777 21.0502 21.0503 21.7769 20.1566 22.2323C19.6054 22.5131 19.0018 22.6347 18.2884 22.693C17.5908 22.75 16.7253 22.75 15.6331 22.75H15.6001H13.8335H13.8084C12.9759 22.75 12.3161 22.75 11.7806 22.7165C11.2337 22.6823 10.7665 22.611 10.3269 22.4456C9.04674 21.9637 8.0364 20.9534 7.55457 19.6732C7.38911 19.2336 7.31786 18.7664 7.28363 18.2195C7.25794 17.809 7.25194 17.3255 7.25055 16.7472C6.66071 16.7423 6.15275 16.729 5.71186 16.693C4.99847 16.6347 4.39484 16.5131 3.84367 16.2323C2.9499 15.7769 2.22324 15.0502 1.76784 14.1565C1.487 13.6053 1.3654 13.0017 1.30711 12.2883C1.25011 11.5906 1.25012 10.7251 1.25012 9.633L1.25012 9.6V8.4L1.25012 8.367C1.25012 7.27486 1.25011 6.40936 1.30711 5.71173C1.3654 4.99835 1.487 4.39472 1.76784 3.84355C2.22324 2.94978 2.9499 2.22312 3.84367 1.76772C4.39484 1.48688 4.99847 1.36527 5.71186 1.30699C6.40948 1.24999 7.27498 1.24999 8.36712 1.25ZM8.7506 16.75C8.75203 17.3183 8.75777 17.7594 8.7807 18.1258C8.81057 18.603 8.86751 18.9032 8.95843 19.1448C9.2881 20.0207 9.97939 20.712 10.8553 21.0417C11.0969 21.1326 11.3971 21.1896 11.8743 21.2194C12.3574 21.2497 12.9703 21.25 13.8335 21.25H15.6001C16.7326 21.25 17.5369 21.2494 18.1662 21.198C18.7869 21.1473 19.1711 21.0509 19.4756 20.8958C20.0871 20.5842 20.5843 20.087 20.8959 19.4755C21.051 19.171 21.1474 18.7867 21.1981 18.1661C21.2495 17.5367 21.2501 16.7325 21.2501 15.6V13.8333C21.2501 12.9702 21.2498 12.3573 21.2195 11.8742C21.1897 11.397 21.1327 11.0968 21.0418 10.8552C20.7121 9.97926 20.0209 9.28798 19.1449 8.95831C18.9034 8.86738 18.6031 8.81045 18.126 8.78058C17.7595 8.75765 17.3184 8.75191 16.7501 8.75048V9.6V9.63302C16.7501 10.7252 16.7501 11.5906 16.6931 12.2883C16.6348 13.0017 16.5132 13.6053 16.2324 14.1565C15.777 15.0502 15.0503 15.7769 14.1566 16.2323C13.6054 16.5131 13.0018 16.6347 12.2884 16.693C11.5908 16.75 10.7253 16.75 9.63314 16.75H9.60012H8.7506ZM5.834 2.80201C5.21338 2.85271 4.82913 2.94909 4.52465 3.10423C3.91313 3.41582 3.41594 3.913 3.10435 4.52453C2.94921 4.829 2.85284 5.21325 2.80213 5.83388C2.75071 6.46327 2.75012 7.26752 2.75012 8.4V9.6C2.75012 10.7325 2.75071 11.5367 2.80213 12.1661C2.85284 12.7867 2.94921 13.171 3.10435 13.4755C3.41594 14.087 3.91313 14.5842 4.52465 14.8958C4.82913 15.0509 5.21338 15.1473 5.834 15.198C6.46339 15.2494 7.26764 15.25 8.40012 15.25H9.60012C10.7326 15.25 11.5369 15.2494 12.1662 15.198C12.7869 15.1473 13.1711 15.0509 13.4756 14.8958C14.0871 14.5842 14.5843 14.087 14.8959 13.4755C15.051 13.171 15.1474 12.7867 15.1981 12.1661C15.2495 11.5367 15.2501 10.7325 15.2501 9.6V8.4C15.2501 7.26752 15.2495 6.46326 15.1981 5.83388C15.1474 5.21325 15.051 4.829 14.8959 4.52453C14.5843 3.913 14.0871 3.41582 13.4756 3.10423C13.1711 2.94909 12.7869 2.85271 12.1662 2.80201C11.5369 2.75058 10.7326 2.75 9.60012 2.75H8.40012C7.26764 2.75 6.46339 2.75058 5.834 2.80201Z" fill="#C8C8C8"/>
                        </svg>
                    </div>
                </div>
                <div v-if="partner?.contacts?.email" class="wifi-popup__form_group">
                    <div class="wifi-popup__form_label">
                        {{ $t('email') }}
                    </div>
                    <div class="wifi-popup__form_field" :class="{ copied: copiedStates.email }">
                        <a class="external" :href="'mailto:' + partner?.contacts?.email">
                            {{ copiedStates.email ? $t('copied') : partner?.contacts?.email }}
                        </a>
                        <svg v-if="copiedStates.email" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20.5068 5.44714C20.8121 5.72703 20.8328 6.20146 20.5529 6.5068L9.55287 18.5068C9.41464 18.6576 9.22081 18.7454 9.01629 18.7498C8.81178 18.7543 8.61432 18.675 8.46967 18.5303L3.46967 13.5303C3.17678 13.2374 3.17678 12.7626 3.46967 12.4697C3.76256 12.1768 4.23744 12.1768 4.53033 12.4697L8.97644 16.9158L19.4471 5.49321C19.727 5.18787 20.2015 5.16724 20.5068 5.44714Z" fill="#00C600"/>
                        </svg>
                        <svg v-else width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" @click="copyText(partner?.contacts?.email, 'email')">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.36712 1.25L8.40012 1.25H9.60012L9.63312 1.25C10.7253 1.24999 11.5908 1.24999 12.2884 1.30699C13.0018 1.36527 13.6054 1.48688 14.1566 1.76772C15.0503 2.22312 15.777 2.94978 16.2324 3.84355C16.5132 4.39472 16.6348 4.99834 16.6931 5.71173C16.7292 6.15263 16.7424 6.66058 16.7473 7.25042C17.3256 7.25182 17.8092 7.25782 18.2197 7.28351C18.7665 7.31774 19.2337 7.38899 19.6733 7.55445C20.9535 8.03628 21.9638 9.04662 22.4457 10.3268C22.6111 10.7664 22.6824 11.2336 22.7166 11.7805C22.7501 12.316 22.7501 12.9758 22.7501 13.8083V13.8333V15.6V15.633C22.7501 16.7252 22.7501 17.5906 22.6931 18.2883C22.6348 19.0017 22.5132 19.6053 22.2324 20.1565C21.777 21.0502 21.0503 21.7769 20.1566 22.2323C19.6054 22.5131 19.0018 22.6347 18.2884 22.693C17.5908 22.75 16.7253 22.75 15.6331 22.75H15.6001H13.8335H13.8084C12.9759 22.75 12.3161 22.75 11.7806 22.7165C11.2337 22.6823 10.7665 22.611 10.3269 22.4456C9.04674 21.9637 8.0364 20.9534 7.55457 19.6732C7.38911 19.2336 7.31786 18.7664 7.28363 18.2195C7.25794 17.809 7.25194 17.3255 7.25055 16.7472C6.66071 16.7423 6.15275 16.729 5.71186 16.693C4.99847 16.6347 4.39484 16.5131 3.84367 16.2323C2.9499 15.7769 2.22324 15.0502 1.76784 14.1565C1.487 13.6053 1.3654 13.0017 1.30711 12.2883C1.25011 11.5906 1.25012 10.7251 1.25012 9.633L1.25012 9.6V8.4L1.25012 8.367C1.25012 7.27486 1.25011 6.40936 1.30711 5.71173C1.3654 4.99835 1.487 4.39472 1.76784 3.84355C2.22324 2.94978 2.9499 2.22312 3.84367 1.76772C4.39484 1.48688 4.99847 1.36527 5.71186 1.30699C6.40948 1.24999 7.27498 1.24999 8.36712 1.25ZM8.7506 16.75C8.75203 17.3183 8.75777 17.7594 8.7807 18.1258C8.81057 18.603 8.86751 18.9032 8.95843 19.1448C9.2881 20.0207 9.97939 20.712 10.8553 21.0417C11.0969 21.1326 11.3971 21.1896 11.8743 21.2194C12.3574 21.2497 12.9703 21.25 13.8335 21.25H15.6001C16.7326 21.25 17.5369 21.2494 18.1662 21.198C18.7869 21.1473 19.1711 21.0509 19.4756 20.8958C20.0871 20.5842 20.5843 20.087 20.8959 19.4755C21.051 19.171 21.1474 18.7867 21.1981 18.1661C21.2495 17.5367 21.2501 16.7325 21.2501 15.6V13.8333C21.2501 12.9702 21.2498 12.3573 21.2195 11.8742C21.1897 11.397 21.1327 11.0968 21.0418 10.8552C20.7121 9.97926 20.0209 9.28798 19.1449 8.95831C18.9034 8.86738 18.6031 8.81045 18.126 8.78058C17.7595 8.75765 17.3184 8.75191 16.7501 8.75048V9.6V9.63302C16.7501 10.7252 16.7501 11.5906 16.6931 12.2883C16.6348 13.0017 16.5132 13.6053 16.2324 14.1565C15.777 15.0502 15.0503 15.7769 14.1566 16.2323C13.6054 16.5131 13.0018 16.6347 12.2884 16.693C11.5908 16.75 10.7253 16.75 9.63314 16.75H9.60012H8.7506ZM5.834 2.80201C5.21338 2.85271 4.82913 2.94909 4.52465 3.10423C3.91313 3.41582 3.41594 3.913 3.10435 4.52453C2.94921 4.829 2.85284 5.21325 2.80213 5.83388C2.75071 6.46327 2.75012 7.26752 2.75012 8.4V9.6C2.75012 10.7325 2.75071 11.5367 2.80213 12.1661C2.85284 12.7867 2.94921 13.171 3.10435 13.4755C3.41594 14.087 3.91313 14.5842 4.52465 14.8958C4.82913 15.0509 5.21338 15.1473 5.834 15.198C6.46339 15.2494 7.26764 15.25 8.40012 15.25H9.60012C10.7326 15.25 11.5369 15.2494 12.1662 15.198C12.7869 15.1473 13.1711 15.0509 13.4756 14.8958C14.0871 14.5842 14.5843 14.087 14.8959 13.4755C15.051 13.171 15.1474 12.7867 15.1981 12.1661C15.2495 11.5367 15.2501 10.7325 15.2501 9.6V8.4C15.2501 7.26752 15.2495 6.46326 15.1981 5.83388C15.1474 5.21325 15.051 4.829 14.8959 4.52453C14.5843 3.913 14.0871 3.41582 13.4756 3.10423C13.1711 2.94909 12.7869 2.85271 12.1662 2.80201C11.5369 2.75058 10.7326 2.75 9.60012 2.75H8.40012C7.26764 2.75 6.46339 2.75058 5.834 2.80201Z" fill="#C8C8C8"/>
                        </svg>
                    </div>
                </div>
                <div v-if="partner?.contacts?.work_hours" class="wifi-popup__form_group">
                    <div class="wifi-popup__form_label">
                        {{ $t('work_hours') }}
                    </div>
                    <div class="wifi-popup__form_field">
                        <input type="text" readonly :value="partner?.contacts?.work_hours">
                    </div>
                </div>
            </div>
        </div>
    </f7-popup>
</template>

<script>
    import { ref } from "vue";

    export default {
        components: {},
        props: {
            partner: {
                type: Object,
                required: true
            },
        },
        setup() {
            const copiedStates = ref({
                address: false,
                phone: false,
                email: false,
                password: false
            });

            const copyText = (text, key) => {
                if (!text) return;

                navigator.clipboard.writeText(text)
                    .then(() => {
                        copiedStates.value[key] = true;
                        setTimeout(() => {
                            copiedStates.value[key] = false;
                        }, 3000);
                    })
                    .catch(err => {
                        console.error('Ошибка при копировании текста:', err);
                    });
            };

            return {
                copiedStates,
                copyText
            };
        }
    };
</script>

<style lang="scss">

</style>